<div>
	<div class="mt-3" *ngIf="gatewayExists; else gatewayNotExists">
		<div class="row">
			<div class="col-3">
				<span class="assimbly img-fluid rounded"></span>
			</div>
			<div class="col-9">
				<div class="card">
					<div class="card-header">
						<b>Welcome to Assimbly</b>
					</div>
					<div class="card-block pt-4">
						<blockquote class="card-blockquote">
							<p class="tab">	Gateway <a  *jhiHasAnyAuthority="'ROLE_ADMIN'" [routerLink]="['/gateway', singleGatewayId, 'edit']" replaceUrl="true" queryParamsHandling="merge">default</a> has been created on first start.
								This message gateway can run one or more flows.
							</p>
							<br />
							<p class="tab"> Start creating new flows or change the default
								settings by clicking on the gateway name.</p>
						</blockquote>
					</div>
				</div>
			</div>
			<div class="col-12 text-center">
	              <button class="btn btn-primary" type="button" *jhiHasAnyAuthority="'ROLE_ADMIN'" (click)="navigateToFlow()">
	              <!-- [routerLink]="['/flow/edit-all' ]" replaceUrl="true" queryParamsHandling="merge"> -->
	                  <span class="fa fa-plus"></span>
	                  <span>Create flow</span>
	              </button>
	        </div>
		</div>
	</div>

<ng-template #gatewayNotExists>
    <div class="row mt-3">
    	  <h2>Flows</h2>    	
            <div class="col-12 text-right">
                <button class="btn btn-primary" type="submit" *jhiHasAnyAuthority="'ROLE_ADMIN'" [routerLink]="['../flow', 'edit-all' ]">
                    <span class="fa fa-plus"></span>
                    <span>Create flow</span>
                </button>                
       		 </div>
       		 <div class="col-1.5">
	            <input type="text" align="left" id="searchTextId" [(ngModel)]="searchText" name="searchText" placeholder="Filter By Flow Name"></input>
            </div>
		    <hr>
	        <div class="row" *ngIf="multipleGateways; else oneGateway">
	            <label class="col-xl-2 col-md-4 col-12 col-form-label">Showing flows for gateway</label>
	            <select class="col-xl-4 col-md-4 col-sm-12 form-control" (change)="getFlowsForSelectedGateway($event.target.value)">
	                <option *ngFor="let gateway of gateways" [value]="gateway.id">{{gateway.name}}</option>
	            </select>
	        </div>
	        <ng-template #oneGateway>
	            <div *ngIf="flows?.length > 0">
	               <!--  <span><h6>Showing flows on stage {{singleGatewayStage}} for gateway: <a  *jhiHasAnyAuthority="'ROLE_ADMIN'" [routerLink]="['/gateway', singleGatewayId, 'edit']" replaceUrl="true" queryParamsHandling="merge">{{singleGatewayName}}</a></h6></span> -->
	            </div>
	            <div *ngIf="flows?.length === 0">
	                <span><h6>No flows yet on stage {{singleGatewayStage}} for gateway: <a  *jhiHasAnyAuthority="'ROLE_ADMIN'" [routerLink]="['/gateway', singleGatewayId, 'edit']" replaceUrl="true" queryParamsHandling="merge">{{singleGatewayName}}</a>.</h6></span>
	            </div>
	        </ng-template>
        <br/>
        <div class="table-responsive" *ngIf="flows?.length > 0">
            <table class="table table-striped table-condensed">
                <thead class="thead-dark">
                    <tr jhiSort [(predicate)]="predicate" [(ascending)]="reverse" [callback]="reset.bind(this)">
                        <th [style.display]="'none'">
                            <span>ID</span>
                        </th>
                        <th jhiSortBy="name" class="border-bottom-none">
                            <span>Flow</span>
                            <span class="fa fa-sort"></span>
                        </th>
                        <th [style.display]="'none'">
                            <span>Gateway</span>
                        </th>
                        <!-- <th class="border-bottom-none">
                            <span>To</span>
                        </th> -->
                        <th [style.display]="'none'">
                            <span>Error</span>
                        </th>
                        <th class="border-bottom-none">                        
                        <!-- <th class="row border-bottom-none">                        
		                   	<div class="col-7"> </div>
		                   	
                        	<div  class="input-group float-right col-5">
							 	<ng-select [items]="flowActions" id="field_header" [(ngModel)]="selectedAction" [hideSelected]=true></ng-select>
								<div class="input-group-append">
									<button type="button" class="btn btn btn-sm"
										(click)="trigerAction(selectedAction)">
										<span>All</span>
									</button>
								</div> 
							</div>-->
                        </th>
						<th class="border-bottom-none">
							    <span>Actions</span>							
						</th>
					</tr>
                </thead>
				<tbody *ngIf="fromEndpoints" infinite-scroll (scrolled)="loadPage(page + 1)" (scrolledUp)="loadPage(page - 1)" [infiniteScrollDisabled]="page >= links['last']" [infiniteScrollDistance]="0" [infiniteScrollUpDistance]="0">
                <!-- <tbody *ngIf="fromEndpoints" infinite-scroll (scrolled)="loadPage(page + 1)" [infiniteScrollDisabled]="page >= links['last']" [infiniteScrollDistance]="0"> -->
                    <tr jhi-flow-row *ngFor="let flow of  (flows | FlowSearchByName: searchText) ;trackBy: trackId" [flow]="flow" [fromEndpoints]="fromEndpoints" [isAdmin]="isAdmin"></tr>
                </tbody>
            </table>
        </div>
	</div>
</ng-template>

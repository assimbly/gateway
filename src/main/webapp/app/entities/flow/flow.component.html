<div>
    <h2>
        <span>Flows</span>
    </h2>
    <hr>
    <div class="mt-3" *ngIf="gatewayExists; else gatewayNotExists">
        <p class="my-2">No gateway have been configured for this node. Please create one first.</p>
        <button class="btn btn-primary float-right" [routerLink]="['/', { outlets: { popup: ['gateway-new'] } }]">
            <span class="fa fa-plus"></span>
            <span>Create gateway</span>
        </button>
    </div>
    <ng-template #gatewayNotExists>
        <div class="row" *ngIf="multipleGateways; else oneGateway">
            <label class="col-xl-2 col-md-4 col-12 col-form-label">Showing flow for gateway</label>
            <select class="col-xl-4 col-md-4 col-sm-12 form-control" (change)="getFlowsForSelectedGateway($event.target.value)">
                <option *ngFor="let gateway of gateways" [value]="gateway.id">{{gateway.name}}</option>
            </select>
        </div>
        <ng-template #oneGateway>
            <div>
                <span>Showing flow for gateway {{singleGatewayName}}</span>
            </div>
        </ng-template>
        <div class="row mt-3">
            <div class="col-12 text-right">
                <button class="btn btn-primary" type="submit" [routerLink]="['../flow', 'edit-all' ]">
                    <span class="fa fa-plus"></span>
                    <span>Create new flow</span>
                </button>
            </div>
        </div>
        <br/>
        <div class="table-responsive" *ngIf="flows">
            <table class="table table-striped">
                <thead>
                    <tr jhiSort [(predicate)]="predicate" [(ascending)]="reverse" [callback]="reset.bind(this)">
                        <th jhiSortBy="id" id="flowTitleID" [hidden]="!flowTitleID">
                            <span>ID</span>
                            <span class="fa fa-sort"></span>
                        </th>
                        <th jhiSortBy="name">
                            <span>Name</span>
                            <span class="fa fa-sort"></span>
                        </th>
                        <th jhiSortBy="gatewayId" id="flowTitleGatewayID" [hidden]="!flowTitleGatewayID">
                            <span>Gateway</span>
                            <span class="fa fa-sort"></span>
                        </th>
                        <th jhiSortBy="fromEndpointId">
                            <span>From</span>
                            <span class="fa fa-sort"></span>
                        </th>
                        <th jhiSortBy="id">
                            <span>To</span>
                            <span class="fa fa-sort"></span>
                        </th>
                        <th jhiSortBy="errorEndpointId" id="flowTitleErrorEndpointID" [hidden]="!flowTitleErrorEndpointID">
                            <span>Endpoint Error
                            </span>
                            <span class="fa fa-sort"></span>
                        </th>
                        <th></th>
                        <th></th>
                        <th>
                            <span>Flow status</span>
                        </th>
                    </tr>
                </thead>
                <tbody infinite-scroll (scrolled)="loadPage(page + 1)" [infiniteScrollDisabled]="page >= links['last']" [infiniteScrollDistance]="0">
                    <tr jhi-flow-row *ngFor="let flow of flows ;trackBy: trackId" [flow]="flow"></tr>
                </tbody>
            </table>
        </div>
    </ng-template>
</div>
<div>
    <h2>Flows</h2>
    <hr>
    <div class="mt-3" *ngIf="gatewayExists; else gatewayNotExists">
        <p class="my-2">Before creating flows, a gateway needs to be created first.</p>
        <button class="btn btn-primary float-right" [routerLink]="['/', { outlets: { popup: ['gateway-new'] } }]">
            <span class="fa fa-plus"></span>
            <span>Create gateway</span>
        </button>
    </div>
    <ng-template #gatewayNotExists>
        <div class="row" *ngIf="multipleGateways; else oneGateway">
            <label class="col-xl-2 col-md-4 col-12 col-form-label">Showing flows for gateway</label>
            <select class="col-xl-4 col-md-4 col-sm-12 form-control" (change)="getFlowsForSelectedGateway($event.target.value)">
                <option *ngFor="let gateway of gateways" [value]="gateway.id">{{gateway.name}}</option>
            </select>
        </div>
        <ng-template #oneGateway>
            <div>
                <span><h6>Showing flows on stage {{singleGatewayStage}} for gateway: <b>{{singleGatewayName}}</b></h6></span>
            </div>
        </ng-template>
        <div class="row mt-3">

            <div class="col-12 text-right">
            	<!-- 
                 <button class="btn" type="button" [routerLink]="['../editor-mode']" *jhiHasAnyAuthority="'ROLE_ADMIN'">
                    <span class="fa fa-code"></span>
                    <span>Editor mode</span>
                </button> -->
                <button class="btn btn-primary" type="submit" *jhiHasAnyAuthority="'ROLE_ADMIN'" [routerLink]="['../flow', 'edit-all' ]">
                    <span class="fa fa-plus"></span>
                    <span>Create flow</span>
                </button>
            </div>
        </div>
        <br/>
        <div class="table-responsive" *ngIf="flows">
            <table class="table table-striped table-condensed">
                <thead class="thead-dark">
                    <tr jhiSort [(predicate)]="predicate" [(ascending)]="reverse" [callback]="reset.bind(this)">
                        <th id="flowTitleID" [hidden]="!flowTitleID">
                            <span>ID</span>
                        </th>
                        <th jhiSortBy="name" class="border-bottom-none">
                            <span>Name</span>
                            <span class="fa fa-sort"></span>
                        </th>
                        <th id="flowTitleGatewayID" [hidden]="!flowTitleGatewayID">
                            <span>Gateway</span>
                        </th>
                        <th class="border-bottom-none">
                            <span>From</span>
                        </th>
                        <th class="border-bottom-none">
                            <span>To</span>
                        </th>
                        <th id="flowTitleErrorEndpointID" [hidden]="!flowTitleErrorEndpointID">
                            <span>Error</span>
                        </th>
                        <th class="border-bottom-none">
                            <span>Status</span>
                        </th>
                        <th class="row border-bottom-none">
		                   	<div class="col-7"> </div>
                        	<div  class="input-group float-right col-5">
								<ng-select [items]="flowActions" id="field_header" [(ngModel)]="selectedAction" [hideSelected]=true></ng-select>
								<div class="input-group-append">
									<button type="button" class="btn btn btn-sm"
										(click)="trigerAction(selectedAction)">
										<span>All</span>
									</button>
								</div>
							</div>
                        </th>
						<th class="border-bottom-none"></th>
					</tr>
                </thead>
                <tbody infinite-scroll (scrolled)="loadPage(page + 1)" [infiniteScrollDisabled]="page >= links['last']" [infiniteScrollDistance]="0">
                    <tr jhi-flow-row *ngFor="let flow of flows ;trackBy: trackId" [flow]="flow" [fromEndpoints]="fromEndpoints" [isAdmin]="isAdmin"></tr>
                </tbody>
            </table>
        </div>
    </ng-template>
</div>